<idea-plugin>

    <extensions defaultExtensionNs="com.redhat.devtools.lsp4ij">
        <!-- Qute LSP -->
        <server id="qute"
                bundle="messages.QuteBundle"
                labelKey="qute.server.label"
                descriptionKey="qute.server.description"
                icon="com.redhat.devtools.intellij.quarkus.lang.QuarkusIcons.Quarkus"
                factoryClass="com.redhat.devtools.intellij.qute.lsp.QuteLanguageServerFactory"/>

        <languageMapping language="Qute_"
                         serverId="qute"
                         documentMatcher="com.redhat.devtools.intellij.qute.lsp.QuteDocumentMatcherForTemplateFile"/>
        <languageMapping language="JSON"
                         serverId="qute"
                         documentMatcher="com.redhat.devtools.intellij.qute.lsp.QuteDocumentMatcherForTemplateFile"/>
        <languageMapping language="yaml"
                         serverId="qute"
                         documentMatcher="com.redhat.devtools.intellij.qute.lsp.QuteDocumentMatcherForTemplateFile"/>
        <languageMapping language="TEXT"
                         serverId="qute"
                         documentMatcher="com.redhat.devtools.intellij.qute.lsp.QuteDocumentMatcherForTemplateFile"/>
        <languageMapping language="JAVA"
                         serverId="qute"
                         documentMatcher="com.redhat.devtools.intellij.qute.lsp.QuteDocumentMatcherForJavaFile"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Qute -->

        <!-- As IJ provides the org.jetbrains.yaml.meta.impl.YamlDocumentationProviderBase which manages hover for yaml file,
             we define the LSPDocumentationProvider at the first order -->
        <lang.documentationProvider
                language="yaml"
                implementationClass="com.redhat.devtools.lsp4ij.operations.documentation.LSPDocumentationProvider"
                order="first"/>
        <!-- As IJ provides the com.jetbrains.jsonSchema.imp.JsonSchemaDocumentationProvider which manages hover for json file,
             we define the LSPDocumentationProvider at the first order -->
        <lang.documentationProvider
                language="JSON"
                implementationClass="com.redhat.devtools.lsp4ij.operations.documentation.LSPDocumentationProvider"
                order="first"/>

        <completion.confidence language="HTML" order="before htmlText"
                               implementationClass="com.redhat.devtools.lsp4ij.operations.completion.LSPCompletionConfidence"/>

        <implicitUsageProvider
                implementation="com.redhat.devtools.intellij.qute.psi.internal.extensions.renarde.RenardeImplicitUsageProvider"/>
        <projectService id="com.redhat.devtools.intellij.qute.settings.UserDefinedQuteSettings"
                        serviceImplementation="com.redhat.devtools.intellij.qute.settings.UserDefinedQuteSettings"/>

        <projectConfigurable groupId="language"
                             id="QuteSupport"
                             bundle="messages.QuteBundle"
                             key="qute.settings.title"
                             instance="com.redhat.devtools.intellij.qute.settings.QuteConfigurable"/>

        <localInspection
                unfair="true"
                language="Qute_"
                bundle="messages.QuteBundle"
                key="qute.templates.inspection"
                groupKey="qute.inspection.group.name"
                enabledByDefault="true"
                level="INFORMATION"
                implementationClass="com.redhat.devtools.intellij.qute.psi.core.inspections.QuteGlobalInspection"/>

        <localInspection
                unfair="true"
                language="Qute_"
                bundle="messages.QuteBundle"
                key="qute.templates.validation.undefinedObject"
                groupPathKey="qute.inspection.group.name"
                groupKey="qute.templates.inspection.group.name"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="com.redhat.devtools.intellij.qute.psi.core.inspections.QuteUndefinedObjectInspection"/>
        <localInspection
                language="Qute_"
                bundle="messages.QuteBundle"
                key="qute.templates.validation.undefinedNamespace"
                groupPathKey="qute.inspection.group.name"
                groupKey="qute.templates.inspection.group.name"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="com.redhat.devtools.intellij.qute.psi.core.inspections.QuteUndefinedNamespaceInspection"/>
    </extensions>

</idea-plugin>
